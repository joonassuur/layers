(this.webpackJsonpopenlayers=this.webpackJsonpopenlayers||[]).push([[0],{125:function(e,t,a){},127:function(e,t,a){},129:function(e,t,a){"use strict";a.r(t);var n=a(45),r=a.n(n),o=a(98),s=a.n(o),i=(a(125),a(96)),c=(a(126),a(127),a(135)),u=a(105),d=a(141),l=a(3),f=a(137),j=a(140),m=a(94),p=a(75),v=a(90),w=a(54),b=a(136),g=a(138),O=a(64),h=a(73),S=a(104),y=a(103),E=a(46);var x=function(){var e=Object(n.useState)(void 0),t=Object(i.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)(),s=Object(i.a)(o,2),x=s[0],_=s[1],F=Object(n.useRef)(),P=Object(l.j)("EPSG:3301"),T=new S.a,k=new b.a({source:T,style:new m.b({stroke:new p.a({color:"rgba(0, 0, 255, 1.0)",width:2}),fill:new v.a({color:"rgba(0, 0, 255, 1.0)"})})}),G=new g.a({source:new y.a({projection:"EPSG:3301",url:"https://tiles.maaamet.ee/tm/tms/1.0.0/foto/{z}/{x}/{-y}.jpg&ASUTUS=MAAAMET&KESKKOND=LIVE&IS=XGIS",tileGrid:new h.a({extent:[40500,5993e3,1064500,7017e3],minZoom:3,resolutions:[4e3,2e3,1e3,500,250,125,62.5,31.25,15.625,7.8125,3.90625,1.953125,.9765625,.48828125]})})});return Object(n.useEffect)((function(){var e=new c.a({layers:[G,k],view:new u.a({center:[55e4,652e4],projection:P,zoom:9})});r(e)}),[]),Object(n.useEffect)((function(){var e=new c.a({layers:[G,k],view:new u.a({center:[55e4,652e4],projection:P,zoom:9})});return e.setTarget(F.current),r(e),function(){return e.setTarget(void 0)}}),[]),Object(n.useEffect)((function(){a&&a.on("click",(function(e){var t=e.coordinate,n=(new f.a).writeGetFeature({baseUrl:"https://gsavalik.envir.ee/geoserver/maaamet/ows?",featureNS:"maaamet",srsName:"EPSG:3301",featurePrefix:"maaamet",propertyNames:["geom","l_aadress","pind_m2"],featureTypes:["ky_kehtiv"],outputFormat:"application/json",filter:Object(O.d)(Object(O.c)("geom",new w.a(t)),Object(O.e)("geom",new w.a(t)))});fetch("https://gsavalik.envir.ee/geoserver/maaamet/ows",{method:"POST",body:(new XMLSerializer).serializeToString(n)}).then((function(e){return e.json()})).then((function(t){a.removeLayer(k),T.clear();var n=(new j.a).readFeatures(t);T.addFeatures(n),a.getView().fit(T.getExtent()),a.addLayer(k);var r=new d.a({element:document.getElementById("popup")});a.addOverlay(r);var o=t.features[0].properties.l_aadress;r.setPosition(e.coordinate),_({address:o})}))}))}),[a]),Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("div",{id:"popup",children:Object(E.jsx)("div",{children:null===x||void 0===x?void 0:x.address})}),Object(E.jsx)("div",{ref:F,id:"map"})]})},_=a(95),F=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,142)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,o=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),o(e),s(e)}))},P=a(102);_.a.defs("EPSG:3301","+proj=lcc+lat_1=59.33333333333334+lat_2=58+lat_0=57.51755393055556+lon_0=24+x_0=500000+y_0=6375000+ellps=GRS80+towgs84=0,0,0,0,0,0,0+units=m+no_defs"),Object(P.a)(_.a),s.a.render(Object(E.jsx)(r.a.StrictMode,{children:Object(E.jsx)(x,{})}),document.getElementById("root")),F()}},[[129,1,2]]]);
//# sourceMappingURL=main.bc1cb969.chunk.js.map