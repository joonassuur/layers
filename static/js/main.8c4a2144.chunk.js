(this.webpackJsonpopenlayers=this.webpackJsonpopenlayers||[]).push([[0],{127:function(e,t,n){},129:function(e,t,n){},132:function(e,t,n){},133:function(e,t,n){"use strict";n.r(t);var a=n(43),r=n.n(a),s=n(99),i=n.n(s),c=(n(127),n(70)),o=n.n(c),d=n(77),u=n(97),l=n(143),m=n(137),j=n(106),v=n(3),p=n(142),f=n(95),b=n(76),O=n(138),h=n(140),w=n(75),g=n(105),x=n(104),y=n(139),_=n(64),S=n(54),E=function(e){return(new y.a).writeGetFeature({baseUrl:"https://gsavalik.envir.ee/geoserver/maaamet/ows?",featureNS:"maaamet",srsName:"EPSG:3301",featurePrefix:"maaamet",propertyNames:["geom","l_aadress","pind_m2","ay_nimi"],featureTypes:["ky_kehtiv"],outputFormat:"application/json",filter:Object(_.d)(Object(_.c)("geom",new S.a(e)),Object(_.e)("geom",new S.a(e)))})},k=function(){var e=Object(d.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://gsavalik.envir.ee/geoserver/maaamet/ows",{method:"POST",body:(new XMLSerializer).serializeToString(E(t))});case 3:return n=e.sent,e.abrupt("return",n.json());case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),F=(n(129),n(18)),N=function(e){var t=e.data;return Object(F.jsx)("div",{id:"popup",children:t&&Object(F.jsxs)(F.Fragment,{children:[Object(F.jsxs)("div",{className:"address-field",children:[Object(F.jsx)("div",{className:"address-name",children:"Aadress: "}),Object(F.jsxs)("div",{className:"address-value",children:[Object(F.jsx)("div",{children:null===t||void 0===t?void 0:t.l_aadress}),Object(F.jsx)("div",{children:null===t||void 0===t?void 0:t.ay_nimi})]})]}),Object(F.jsxs)("div",{className:"size-field",children:[Object(F.jsx)("div",{className:"size-name",children:"Pindala: "}),Object(F.jsxs)("div",{className:"size-value",children:[null===t||void 0===t?void 0:t.pind_m2," m2"]})]})]})})};n(131),n(132);var P=function(){var e=Object(a.useState)(void 0),t=Object(u.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(void 0),i=Object(u.a)(s,2),c=i[0],y=i[1],_=Object(a.useRef)(),S=Object(v.j)("EPSG:3301"),E=new g.a,P=new O.a({source:E,style:new f.b({stroke:new b.a({color:"rgba(0, 0, 255, 1.0)",width:2})})}),T=new h.a({source:new x.a({projection:"EPSG:3301",url:"https://tiles.maaamet.ee/tm/tms/1.0.0/foto/{z}/{x}/{-y}.jpg&ASUTUS=MAAAMET&KESKKOND=LIVE&IS=XGIS",tileGrid:new w.a({extent:[40500,5993e3,1064500,7017e3],minZoom:3,resolutions:[4e3,2e3,1e3,500,250,125,62.5,31.25,15.625,7.8125,3.90625,1.953125,.9765625,.48828125]})})}),z=function(e){var t=new l.a({element:document.getElementById("popup")});n.addOverlay(t),t.setPosition(e)};return Object(a.useEffect)((function(){var e=new m.a({layers:[T,P],view:new j.a({center:[55e4,652e4],projection:S,zoom:9})});r(e)}),[]),Object(a.useEffect)((function(){var e=new m.a({layers:[T,P],view:new j.a({center:[55e4,652e4],projection:S,zoom:9,minZoom:9})});return e.setTarget(_.current),r(e),function(){return e.setTarget(void 0)}}),[]),Object(a.useEffect)((function(){n&&n.on("click",function(){var e=Object(d.a)(o.a.mark((function e(t){var a,r,s,i,c,d,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.coordinate,n.removeLayer(P),E.clear(),e.next=5,k(a);case 5:r=e.sent,(s=(new p.a).readFeatures(r)).length?(i=r.features[0].properties,c=i.l_aadress,d=i.pind_m2,u=i.ay_nimi,y({l_aadress:c,pind_m2:d,ay_nimi:u}),E.addFeatures(s),n.addLayer(P),z(a)):(y(void 0),z());case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[n]),Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(N,{data:c}),Object(F.jsx)("div",{ref:_,id:"map"})]})},T=n(96),z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,144)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),s(e),i(e)}))},G=n(103);T.a.defs("EPSG:3301","+proj=lcc+lat_1=59.33333333333334+lat_2=58+lat_0=57.51755393055556+lon_0=24+x_0=500000+y_0=6375000+ellps=GRS80+towgs84=0,0,0,0,0,0,0+units=m+no_defs"),Object(G.a)(T.a),i.a.render(Object(F.jsx)(r.a.StrictMode,{children:Object(F.jsx)(P,{})}),document.getElementById("root")),z()}},[[133,1,2]]]);
//# sourceMappingURL=main.8c4a2144.chunk.js.map